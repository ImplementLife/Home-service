<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<body>
<header th:fragment="copy">
   <div class="container">
      <div class="wrapper__headerContent">

         <div class="header__logo">
            <div class="header__logo_imgWrap"><a href="/"><img src="/resources/com/img/logo.png" alt="'logo'"></a></div>
            <div class="header__logo_name">Home-Service</div>
         </div>

         <div class="header__findLine">
            <form action="" method="get">
               <input type="text" name="find" placeholder="Поиск">
               <button type="submit"><img src="/resources/com/img/search_black.svg" alt="Поиск!"></button>
            </form>
         </div>

         <div class="header__overlay" id="popup">
            <a class="header__cancel" href="#"></a>
            <form class="header__popup" action="" method="get">
               <input type="text" name="find" placeholder="Поиск">
               <button type="submit"><img src="/resources/com/img/search_black.svg" alt="Поиск!"></button>
            </form>
         </div>

         <div class="header__buttons">
            <div class="header__searchMobile">
               <a href="#popup">
                  <img src="/resources/com/img/search-white.svg" alt="Поиск">
               </a>
            </div>
            <div class="header__favorite">
               <a href="javascript: goToPage('favorite');">
                  <img src="/resources/com/img/favorite_border-white-18dp.svg" alt="Избранное">
                  <div th:text="${countFavorite}" id="countFavorite" class="header__count" th:hidden="${countFavorite <= 1}"></div>
               </a>
            </div>
            <div class="header__basked">
               <a href="javascript: goToPage('cart');">
                  <img src="/resources/com/img/shopping_cart-white-18dp.svg" alt="Корзина">
                  <div th:text="${countCart}" id="countCart" class="header__count" th:hidden="${countCart < 1}"></div>

               </a>
            </div>
            <div><a style="color:#fafafa;" href="/login">Вход</a></div>
         </div>

      </div>
   </div>
   <script type="text/javascript" src="/resources/com/js/localCartFavorite.js"></script>
   <script>
      function goToPage(tab) {
         var cart = new Storage('countCart');
         let temp = cart.getAll();
         var url = '/privateProfile?tab=' + tab + '&productsCart=';
         for (var i = 0; i < temp.length; i++) url += temp[i] + ' ';
         var favorite = new Storage('countFavorite');
         temp = favorite.getAll();
         url += '&productsFavorite=';
         for (var i = 0; i < temp.length; i++) url += temp[i] + ' ';
         document.location.href = url;
      }
   </script>
</header>
</body>
</html>

